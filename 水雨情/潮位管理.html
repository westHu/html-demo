<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="ThemeBucket">
  <link rel="shortcut icon" href="#" type="image/png">

  <title>水情管理</title>
  <link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
  <!--icheck-->
  <link href="../js/iCheck/skins/minimal/minimal.css" rel="stylesheet">
  <link href="../js/iCheck/skins/square/square.css" rel="stylesheet">
  <link href="../js/iCheck/skins/square/red.css" rel="stylesheet">
  <link href="../js/iCheck/skins/square/blue.css" rel="stylesheet">


    <!--dynamic table-->
    <link href="../js/advanced-datatable/css/demo_page.css" rel="stylesheet" />
    <link href="../js/advanced-datatable/css/demo_table.css" rel="stylesheet" />
    <link href="../js/data-tables/DT_bootstrap.css" rel="stylesheet" />

  <!--Morris Chart CSS -->
  <link rel="stylesheet" href="../js/morris-chart/morris.css">

  <link href="../css/style.css" rel="stylesheet">
  <link href="../css/style-responsive.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="js/html5shiv.js"></script>
  <script src="js/respond.min.js"></script>
  <![endif]-->
  <style type="text/css">
     .tl {  
			width: 380px;
			height: 50px;  
			position: fixed ! important; 
			right: 100px;
			top: -300px;
			z-index: 999999;/*这里是该元素与显示屏的距离，据说越大越好，但是我也没有看到效果，因为没有它也是可以的*/  
			margin-top: 20%;  
			margin-left: -209px;   
			background-color :#ffffff;  
			-webkit-transition: .5s ease-in-out;/* css的transition允许css的属性值在一定的时间内从一个状态平滑的过渡到另一个状态 */  
			-moz-transition: .5s ease-in-out;/*这里为了兼容其他浏览器*/  
			-o-transition: .5s ease-in-out;  
			background-color :#ffffff;  
			bolder: 1px #000;
			border:2px solid;
			border-radius:15px;
			-moz-border-radius:15px; /* Old Firefox */
			box-shadow: 10px 10px 5px #888888;
		}

     .tl-view {
         width: 700px;
         height: 400px;
         position: fixed ! important;
         right: 100px;
         top: -240px;
         z-index: 999999;/*这里是该元素与显示屏的距离，据说越大越好，但是我也没有看到效果，因为没有它也是可以的*/
         margin-top: 20%;
         margin-left: -209px;
         background-color :#ffffff;
         -webkit-transition: .5s ease-in-out;/* css的transition允许css的属性值在一定的时间内从一个状态平滑的过渡到另一个状态 */
         -moz-transition: .5s ease-in-out;/*这里为了兼容其他浏览器*/
         -o-transition: .5s ease-in-out;
         background-color :#ffffff;
         bolder: 1px #000;
         border:2px solid;
         border-radius:15px;
         -moz-border-radius:15px; /* Old Firefox */
         box-shadow: 10px 10px 5px #888888;
     }

     .amap-marker-label {
         border: 2px solid;
         border-radius: 10px;
     }
  </style>
</head>

<body class="horizontal-menu-page">


<section>
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">
                    <img src="../images/tem-inner-logo.png" alt="">
                </a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                 <ul class="nav navbar-nav">
                    <li><a href="../index.html">首 页</a></li>
                    <li><a href="综合管理.html">综合管理</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"> 运行控制管理 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">土壤含水量监测</a></li>
                            <li><a href="#">小区雨量监测</a></li>
                            <li><a href="#">管道流量</a></li>
                            <li><a href="#">河道监测</a></li>
                            <li><a href="#">泵闸站监测</a></li>
                        </ul>
                    </li>
                    <li><a href="#">设备自检管理</a></li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">水雨情 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li class="active"><a href="#">雨情管理</a></li>
                            <li><a href="#">风情管理</a></li>
                            <li><a href="#">水情管理</a></li>
                            <li><a href="#">潮位管理</a></li>
                        </ul>
                    </li>
					<li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">管网分析 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">流量分析</a></li>
                            <li><a href="#">横截面分析</a></li>
                            <li><a href="#">纵界面分析</a></li>
                            <li><a href="#">坡度分析</a></li>
                            <li><a href="#">污染溯源分析</a></li>
                        </ul>
                    </li>
					<li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">运维管理 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">设备管理</a></li>
                            <li><a href="#">巡检管理</a></li>
                           
                        </ul>
                    </li>
					<li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">应急管理 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">应急响应管理</a></li>
                            <li><a href="#">现场指挥管理</a></li>
                            <li><a href="#">应急演练管理</a></li>
                            <li><a href="#">应急信息管理</a></li>
                            
                        </ul>
                    </li>
					<li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">综合评价 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">国家和地方标准</a></li>
                            <li><a href="#">绩效和考核</a></li>
                            <li><a href="#">排水能力负荷</a></li>
                        </ul>
                    </li>
					<li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">基础设置 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">人员管理</a></li>
                            <li><a href="#">组织管理</a></li>
                            <li><a href="#">资源管理</a></li>
                            <li><a href="#">角色管理</a></li>
                            <li><a href="#">消息管理</a></li>
							<li><a href="#">流程管理</a></li>
                        </ul>
                    </li>
                </ul>
                 <ul class="nav navbar-nav navbar-right">
                    <li>
                        <form class="navbar-form navbar-left" role="search">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="百度">
                            </div>
                        </form>
                    </li>
					
					<li>
                        <a href="#" class="dropdown-toggle info-number" data-toggle="dropdown">
                            <i class="fa fa-tasks"></i>
                            <span class="badge">3</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-head pull-right">
                            <h5 class="title">待办任务【3】</h5>
                            <ul class="dropdown-list user-list">
                                <li class="new">
                                    <a href="#">
                                        <div class="task-info">
                                            <div>设备巡检任务</div>
                                        </div>
                                        <div class="progress progress-striped">
                                            <div style="width: 40%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="40" role="progressbar" class="progress-bar progress-bar-warning">
                                                <span class="">40%</span>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                <li class="new">
                                    <a href="#">
                                        <div class="task-info">
                                            <div>日常巡查任务</div>
                                        </div>
                                        <div class="progress progress-striped">
                                            <div style="width: 90%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="90" role="progressbar" class="progress-bar progress-bar-success">
                                                <span class="">90%</span>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <div class="task-info">
                                            <div>日常水位记录任务</div>
                                        </div>
                                        <div class="progress progress-striped">
                                            <div style="width: 66%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="66" role="progressbar" class="progress-bar progress-bar-info">
                                                <span class="">66% </span>
                                            </div>
                                        </div>
                                    </a>
                                </li>                              
                                <li class="new"><a href="">查看所有待办任务</a></li>
                            </ul>
                        </div>
                    </li>
					
					<li>
                        <a href="#" class="dropdown-toggle info-number" data-toggle="dropdown">
                            <i class="fa fa-envelope-o"></i>
                            <span class="badge">4</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-head pull-right">
                            <h5 class="title">邮件【4】 </h5>
                            <ul class="dropdown-list user-list">
                                <li class="new">
                                    <a href="">
                                        <span class="thumb"><img src="../images/photos/user1.png" alt="" /></span>
                                        <span class="desc">
                                          <span class="name">卢云晓 <span class="badge badge-success">new</span></span>
                                          <span class="msg">泵运行情况...</span>
                                        </span>
                                    </a>
                                </li>
                                <li>
                                    <a href="">
                                        <span class="thumb"><img src="../images/photos/user2.png" alt="" /></span>
                                        <span class="desc">
                                          <span class="name">卢云晓</span>
                                          <span class="msg">帮忙批阅以下文件...</span>
                                        </span>
                                    </a>
                                </li>
                              
                                <li>
                                    <a href="">
                                        <span class="thumb"><img src="../images/photos/user4.png" alt="" /></span>
                                        <span class="desc">
                                          <span class="name">赵胤君</span>
                                          <span class="msg">日常更改巡检计划...</span>
                                        </span>
                                    </a>
                                </li>
                                <li>
                                    <a href="">
                                        <span class="thumb"><img src="../images/photos/user5.png" alt="" /></span>
                                        <span class="desc">
                                          <span class="name">袁公子</span>
                                          <span class="msg">防止海潮倒灌办法...</span>
                                        </span>
                                    </a>
                                </li>
                                <li class="new"><a href="">查看所有邮件</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle info-number" data-toggle="dropdown">
                            <i class="fa fa-bell-o"></i>
                            <span class="badge">4</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-head pull-right">
                            <h5 class="title">通知【4】</h5>
                            <ul class="dropdown-list user-list">
                                <li class="new">
                                    <a href="">
                                        <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                                        <span class="name">机房日志.  </span>
                                        <em class="small">机房今日运行正常...</em>
                                    </a>
                                </li>
                                <li class="new">
                                    <a href="">
                                        <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                                        <span class="name">潮位通知.  </span>
                                        <em class="small">今日最好潮位...</em>
                                    </a>
                                </li>
                                <li class="new">
                                    <a href="">
                                        <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                                        <span class="name">泵站数据异常.  </span>
                                        <em class="small">城内河泵站数据...</em>
                                    </a>
                                </li>
                                <li class="new">
                                    <a href="">
                                        <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                                        <span class="name">会议通知.  </span>
                                        <em class="small">今日下午2点会议...</em>
                                    </a>
                                </li>
                                <li class="new"><a href="">查看所有通知</a></li>
                            </ul>
                        </div>
                    </li>
					
					
					
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <img alt="" src="../images/photos/user-avatar.png"> 超级管理员 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">主页</a></li>
                            <li><a href="#">设置</a></li>
                            <li><a href="login.html">登出</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

 <!-- main content start-->
    <div class="main-content" style="margin-left:0px;min-height:860px;">
		<div id="waterMapView" style="height:860px;border:1px solid #000;margin:5px"></div>
        <div class="button-group">
            <input type="button" class="button" value="显示热力图" onclick="heatmap.show()"/>
            <input type="button" class="button" value="关闭热力图" onclick="heatmap.hide()"/>
        </div>
		<div class="tl">
            <table>
                <tbody>
                <tr>
                    <td><h4 style="width:135px; margin-top: 15px; margin-left: 20px">潮位管理</h4></td>
                    <td></td>
                    <td><button type="button" class="btn btn-primary">返回首页</button></td>
                    <td><button type="button" class="btn btn-primary" onclick="showT1View()">潮位信息</button></td>
                </tr>
                </tbody>
            </table>
        </div>
        <div id="tl-view" class="tl-view" data-id="1">
            <section class="panel">
                <header class="panel-heading custom-tab dark-tab">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#lang" data-toggle="tab">海 浪</a>
                        </li>
                        <li class="">
                            <a href="#feng" data-toggle="tab">海面风</a>
                        </li>
                        <li class="">
                            <a href="#wen" data-toggle="tab">海 温</a>
                        </li>
                    </ul>
                </header>
                <div class="panel-body">
                    <div class="tab-content">
                        <div class="tab-pane active" id="lang">
                            <table  class="table table-bordered table-striped table-condensed">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>浪高(m)</th>
                                    <th>浪向(°)</th>
                                    <th>周期(s)</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr class="gradeA">
                                    <td>1</td>
                                    <td>0.32</td>
                                    <td>73</td>
                                    <td>3</td>
                                </tr>
                                <tr class="gradeA">
                                    <td>2</td>
                                    <td>0.21</td>
                                    <td>82</td>
                                    <td>3</td>
                                </tr>
                                <tr class="gradeA">
                                    <td>3</td>
                                    <td>0.26</td>
                                    <td>67</td>
                                    <td>8</td>
                                </tr>
                                <tr class="gradeA">
                                    <td>4</td>
                                    <td>0.46</td>
                                    <td>60</td>
                                    <td>6</td>
                                </tr>
                                <tr class="gradeA">
                                    <td>5</td>
                                    <td>0.34</td>
                                    <td>54</td>
                                    <td>8</td>
                                </tr>
                                <tr class="gradeA">
                                    <td>6</td>
                                    <td>0.37</td>
                                    <td>51</td>
                                    <td>6</td>
                                </tr>
                                <tr class="gradeA">
                                    <td>7</td>
                                    <td>0.27</td>
                                    <td>25</td>
                                    <td>3</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="tab-pane" id="feng">
                            <table  class="table table-bordered table-striped table-condensed">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>区域</th>
                                    <th>风速(米/秒)</th>
                                    <th>风向(°)</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>3#</td>
                                    <td>8.8</td>
                                    <td>30</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>2#</td>
                                    <td>9.0</td>
                                    <td>45</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>6#</td>
                                    <td>10.2</td>
                                    <td>59</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>8#</td>
                                    <td>8.4</td>
                                    <td>90</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="tab-pane" id="wen">
                            <table  class="table table-bordered table-striped table-condensed">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>区域</th>
                                    <th>温度(℃)</th>
                                    <th>最高温(℃)</th>
                                    <th>最低温(℃)</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>3#</td>
                                    <td>13.3</td>
                                    <td>20.1</td>
                                    <td>6.7</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>4#</td>
                                    <td>12.4</td>
                                    <td>22.5</td>
                                    <td>7.3</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>6#</td>
                                    <td>11.2</td>
                                    <td>18.3</td>
                                    <td>6.0</td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>7#</td>
                                    <td>10.1</td>
                                    <td>18.1</td>
                                    <td>5.7</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </div>


        </div >
        <!--body wrapper end-->

        <!--footer section start-->
        <footer>
            2017 &copy; 海绵 by <a href="#" target="_blank">Hup</a>
        </footer>
        <!--footer section end-->


    </div>
    <!-- main content end-->
</section>


<!-- Placed js at the end of the document so the pages load faster -->
<script src="../js/jquery-1.10.2.min.js"></script>
<script src="../js/jquery-ui-1.9.2.custom.min.js"></script>
<script src="../js/jquery-migrate-1.2.1.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/modernizr.min.js"></script>
<script src="../js/jquery.nicescroll.js"></script>

<!--dynamic table-->
<script type="text/javascript" language="javascript" src="../js/advanced-datatable/js/jquery.dataTables.js"></script>
<script type="text/javascript" src="../js/data-tables/DT_bootstrap.js"></script>
<!--dynamic table initialization -->
<script src="../js/dynamic_table_init.js"></script>

<!--icheck -->
<script src="../js/iCheck/jquery.icheck.js"></script>
<script src="../js/icheck-init.js"></script>

<!--common scripts for all pages-->
<script src="../js/scripts.js"></script>

<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.4.0&key=1020aebdfa5dfd15c5bc40bd8fc88117"></script>
<script type="text/javascript" src="../js/gaode-map/ui-main.js"></script>
<script type="text/javascript" src="../js/water-map-view.js"></script>
<script type="text/javascript" src="../js/water-sea-map-data.js"></script>
<script>

    window.setInterval("addMarker()",3000); //定时执行
    //window.setTimeout("addMarker()",3000);//定时执行，只执行一次

    var map = new AMap.Map("waterMapView", {
        pitch:75,
        zoom: 11,
        expandZoomRange:true,
        zooms:[10,12],
        center:[121.673123,30.076746]
    });

    var markerArr = [
        { title: "大目涂潮位", point: "121.20237,30.380003", address: "0", tel: "1852345000",rainfall:"1.203"},
        { title: "东江下游 ", point: "121.263886,30.386483", address: "#", tel: "1823320000" ,rainfall:"1.282"},
        { title: "澄浪堰潮位新", point: "121.348398,30.370531", address: "#", tel: "18523500000" ,rainfall:"1.230"},
        { title: "姚江闸下新装", point: "121.423712,30.31418", address: "#", tel: "12341000000",rainfall:"0.903" },
        { title: "宁波三江口", point: "121.499601,30.256798", address: "#", tel: "128234000",rainfall:"0.290" },
        { title: "杨木碶潮位:", point: "121.642755,30.084448", address: "0", tel: "1392800000",rainfall:"0.220" },
        { title: "镇海口:", point: "121.932512,29.942343", address: "#", tel: "18209000000",rainfall:"1.120" },
        { title: "浃水潮位:", point: "122.139482,29.846156", address: "0", tel: "182902000",rainfall:"1.180" },
        { title: "穿山潮位", point: "122.006102,29.59925", address: "#", tel: "1128372100",rainfall:"11.502" },

        { title: "峙南潮位", point: "122.006102,29.462486", address: "0", tel: "1852345000",rainfall:"1.110"},
        { title: "春晓潮位 ", point: "122.010701,29.313442", address: "#", tel: "1823320000" ,rainfall:"1.282"},
        { title: "下三山潮位", point: "122.0199,29.164179", address: "#", tel: "18523500000" ,rainfall:"0.230"},
        { title: "庆丰塘", point: "122.254465,29.679612", address: "#", tel: "128234000",rainfall:"1.201" },
        { title: "四灶浦十二塘闸潮位:", point: "121.822129,30.288237", address: "0", tel: "1392800000",rainfall:"1.102" },
        { title: "水云浦十一塘闸潮位:", point: "121.527772,30.539388", address: "#", tel: "18209000000",rainfall:"1.120" },
        { title: "镇龙浦十塘闸潮位:", point: "121.233415,30.583172", address: "0", tel: "182902000",rainfall:"1.420" },
        { title: "淡水泓十塘闸潮位", point: "122.190075,29.430279", address: "#", tel: "1128372100",rainfall:"1.150" }
    ]
    var markers = [];
    for (var i = 0; i < markerArr.length; i++) {
        //console.info("markerArr[i].point = " + markerArr[i].point)
        var	marker = new AMap.Marker({
            position: markerArr[i].point.split(','),
            offset: new AMap.Pixel(-12,-12),
            zIndex: 101,
            title: markerArr[i].title,
            map: map
        });

        if ( Number(markerArr[i].rainfall) > 2) {
            marker.setLabel({//label默认蓝框白底左上角显示，样式className为：amap-marker-label
                offset: new AMap.Pixel(20, 20),//修改label相对于maker的位置
                content: "<p class=\"my-desc\" style='margin: 0 0 0px;background-color: #d91e0b'>" + markerArr[i].title + "</br> 浪高：" + markerArr[i].rainfall + " M" + "</p>"
            });
        }else {
            // 设置label标签
            marker.setLabel({//label默认蓝框白底左上角显示，样式className为：amap-marker-label
                offset: new AMap.Pixel(20, 20),//修改label相对于maker的位置
                content: "<p class=\"my-desc\" style='margin: 0 0 0px;background-color: #00FF00'>"+markerArr[i].title + "</br> 浪高：" + markerArr[i].rainfall + " M" + "</p>"
            });
        }
        markers.push(marker);
    }
    map.setFitView();

    //定位在宁波
    map.plugin(["AMap.CitySearch"], function() {
        var citysearch = new AMap.CitySearch();
        citysearch.getLocalCity();
        AMap.event.addListener(citysearch, "complete", function(result) {
            var citybounds;
            if (result && result.city && result.bounds) {
                citybounds = result.bounds;
                map.setBounds(citybounds);
            }
        });
    });
    map.setLimitBounds(map.getBounds());

    //设置卫星图
    AMapUI.loadUI(['control/BasicControl'], function(BasicControl) {
        //添加一个缩放控件
        map.addControl(new BasicControl.Zoom({
            position: 'lt'
        }));

        //缩放控件，显示Zoom值
        map.addControl(new BasicControl.Zoom({
            position: 'lb',
            showZoomNum: true
        }));

        //图层切换控件
        /*map.addControl(new BasicControl.LayerSwitcher({
            position: 'rt'
        }));*/
    });

    //地图着色
    function initPage(DistrictCluster, $) {

        var distCluster = new DistrictCluster({
            map: map, //所属的地图实例

            getPosition: function(item) {

                if (!item) {
                    return null;
                }

                var parts = item.split(',');

                //返回经纬度
                return [parseFloat(parts[0]), parseFloat(parts[1])];
            },
            renderOptions: {
                //基础样式
                featureStyle: {
                    fillStyle: 'rgba(102,170,0,0.5)', //填充色
                    lineWidth: 2, //描边线宽
                    strokeStyle: 'rgb(31, 119, 180)', //描边色
                    //鼠标Hover后的样式
                    hoverOptions: {
                        fillStyle: 'rgba(255,255,0,0.2)'
                    }
                },
                //特定区划级别的默认样式
                featureStyleByLevel: {
                    //全国
                    country: {
                        fillStyle: 'rgba(49, 163, 84, 0.8)'
                    }

                },
                //直接定义某写区划面的样式
                getFeatureStyle: function(feature, dataItems) {
//                        console.info("dataItems--> " + dataItems.length);
                    if (dataItems.length == 1390 || dataItems.length == 221 || dataItems.length == 71 || dataItems.length == 53
                        || dataItems.length == 117  || dataItems.length == 164 || dataItems.length == 161 || dataItems.length == 30) {

                        return {
                            fillStyle: '#FFEFDB'
                        };

                    } ;
                }
            }
        });

        window.distCluster = distCluster;

        $('<div id="loadingTip">加载数据，请稍候...</div>').appendTo(document.body);
        $.get('http://a.amap.com/amap-ui/static/data/10w.txt', function(csv) {

            $('#loadingTip').remove();

            var data = csv.split('\n');

            distCluster.setData(data);
        });
    }

    //加载相关组件
    AMapUI.load(['ui/geo/DistrictCluster', 'lib/$'], function(DistrictCluster, $) {

        //启动页面
        initPage(DistrictCluster, $);
    });

    function addMarker() {
        var label = markers.length;
        console.info("marker label = " + markers.length)
        for (var i = 0; i< markers.length; i ++) {
            //console.info("内容 --" + markers[i].getLabel().content)
            //console.info("内容 22--" + markers[i].getContent())
            var rainfallNew  = Math.ceil(Math.random()* 10) + Number(markerArr[i].rainfall);

            if (Number(rainfallNew) > 3) {
                markers[i].setLabel({//label默认蓝框白底左上角显示，样式className为：amap-marker-label
                    offset: new AMap.Pixel(20, 20),//修改label相对于maker的位置
                    content: "<p class=\"my-desc\" style='margin: 0 0 0px;background-color: #d91e0b'>"+markerArr[i].title + "</br> 水位：" + rainfallNew + " M" + "</p>"
                });
            }else {
                // 设置label标签
                markers[i].setLabel({//label默认蓝框白底左上角显示，样式className为：amap-marker-label
                    offset: new AMap.Pixel(20, 20),//修改label相对于maker的位置
                    content: "<p class=\"my-desc\" style='margin: 0 0 0px;background-color: #00FF00'>"+markerArr[i].title + "</br> 水位：" + rainfallNew + " M" + "</p>"
                });
            }

        }
        //map.markOnAMAP();
    }

    if (!isSupportCanvas()) {
        alert('热力图仅对支持canvas的浏览器适用,您所使用的浏览器不能使用热力图功能,请换个浏览器试试~')
    }
    //详细的参数,可以查看heatmap.js的文档 http://www.patrick-wied.at/static/heatmapjs/docs.html
    //参数说明如下:
    /* visible 热力图是否显示,默认为true
     * opacity 热力图的透明度,分别对应heatmap.js的minOpacity和maxOpacity
     * radius 势力图的每个点的半径大小
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
     .2:'rgb(0, 255, 255)',
     .5:'rgb(0, 110, 255)',
     .8:'rgb(100, 0, 255)'
     }
     其中 key 表示插值的位置, 0-1
     value 为颜色值
     */
    var heatmap;
    map.plugin(["AMap.Heatmap"], function() {
        //初始化heatmap对象
        heatmap = new AMap.Heatmap(map, {
            radius: 25, //给定半径
            opacity: [0, 0.8]
            ,gradient:{
            0.5: 'blue',
            0.65: 'rgb(117,211,248)',
            0.7: 'rgb(0, 255, 0)',
            0.9: '#ffea00',
            1.0: '#09993A'
            }
        });
        //设置数据集：该数据为北京部分“公园”数据
        heatmap.setDataSet({
            data: heatmapData,
            max: 100
        });
    });
    //判断浏览区是否支持canvas
    function isSupportCanvas() {
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>

<script>
    function showT1View() {
        var t = $("#tl-view").data("id");
        if (t == "1"){
            $("#tl-view").hide();
            $("#tl-view").data("id","0");
        }else {
            $("#tl-view").show();
            $("#tl-view").data("id","1");
        }
    }
</script>

</body>
</html>
